const express = require("express");
// const path = require("path");
const router = express.Router();
const axios = require("axios");
const util = require("../data/utils/util");
const movieData = require("../data/movie/movie");
const commentData = require("../data/movie/comment");

router.post("/getInfo", async (req, res) => {
    try {
      const content = req.body.content;
      //const commentChild = req.body.commentChild;
      const userName = req.body.userName;
      const movieId = req.body.movieId;
      var myDate = new Date();
      const date = myDate.toLocaleDateString(); 
      const rate = req.body.rate;
      if (!content){
        throw `content does not exist!`
      }
      const comment  = await commentData.createComment(content, userName, movieId, date, rate);
      if(comment == true){
        res.send(true);
      }
      else{
        throw `Did not comment.`
      }
    } catch (e) {
      console.log(e);
      res.status(400).send(e);
    }
  });


module.exports = router;